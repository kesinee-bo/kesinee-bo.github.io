<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สำรวจปัญหาการเกษตรด้วย Chain of Thought (CoT)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Sarabun', sans-serif; /* Using a common Thai font */
            background-color: #f5f5f4; /* bg-stone-100 */
            color: #292524; /* text-stone-800 */
        }
        .content-section {
            background-color: #ffffff;
            padding: 1.5rem; /* p-6 */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            margin-bottom: 2rem; /* mb-8 */
        }
        .section-title {
            color: #047857; /* text-green-700 */
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            margin-bottom: 1rem; /* mb-4 */
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #10B981; /* border-green-500 */
        }
        .problem-button {
            background-color: #16a34a; /* bg-green-600 */
            color: white;
            transition: background-color 0.3s ease;
        }
        .problem-button:hover {
            background-color: #15803d; /* bg-green-700 */
        }
        .problem-button.active {
            background-color: #14532d; /* bg-green-900 */
            color: white;
            font-weight: bold;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border-radius: 0.375rem 0.375rem 0 0; /* rounded-t-md */
            background-color: #e7e5e4; /* bg-stone-200 */
            color: #047857; /* text-green-700 */
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .tab-button:hover {
            background-color: #d6d3d1; /* bg-stone-300 */
        }
        .tab-button.active {
            background-color: #059669; /* bg-green-600 */
            color: white;
            font-weight: 600;
        }
        .prompt-answer-card {
            border: 1px solid #d6d3d1; /* border-stone-300 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 1rem; /* p-4 */
            margin-top: 1rem; /* mt-4 */
            background-color: #fafaf9; /* bg-stone-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px; /* Max width for the chart container */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px; /* Max height */
        }
         /* Custom scrollbar for better aesthetics if content overflows */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e; /* bg-stone-400 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c; /* bg-stone-500 */
        }
        .solution-content ul {
            list-style-type: disc;
            margin-left: 1.5rem;
        }
        .solution-content li {
            margin-bottom: 0.5rem;
        }
         .solution-content ol {
            list-style-type: decimal;
            margin-left: 1.5rem;
        }
        .solution-content strong {
            font-weight: 600;
        }
        .solution-content h1, .solution-content h2, .solution-content h3, .solution-content h4 {
            font-weight: 600;
            margin-top: 0.75em;
            margin-bottom: 0.25em;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen flex flex-col">

    <header class="bg-green-700 text-white p-6 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto max-w-6xl">
            <h1 class="text-3xl md:text-4xl font-bold text-center">สำรวจปัญหาการเกษตรด้วย Chain of Thought (CoT)</h1>
        </div>
    </header>

    <main class="container mx-auto max-w-6xl p-4 md:p-8 flex-grow">
        <section id="introduction" class="content-section">
            <h2 class="section-title">บทนำ: ทำความเข้าใจปัญหาการเกษตรผ่าน CoT</h2>
            <p class="text-lg leading-relaxed">
                แอปพลิเคชันนี้จะพาคุณไปสำรวจตัวอย่างปัญหาต่างๆ ในภาคการเกษตร และแสดงให้เห็นว่าการใช้เทคนิค Chain of Thought (CoT) ในการตั้งคำถามกับ AI เช่น Gemini สามารถนำไปสู่แนวทางการแก้ไขปัญหาที่ละเอียด รอบด้าน และนำไปปฏิบัติได้จริงได้อย่างไร
                คุณสามารถเลือกปัญหาที่สนใจ จากนั้นศึกษา Prompt และคำตอบที่ได้จากการใช้ CoT ในรูปแบบต่างๆ เพื่อทำความเข้าใจกระบวนการคิดวิเคราะห์และหาทางออกสำหรับความท้าทายทางการเกษตร
            </p>
        </section>

        <section id="problem-selection" class="content-section">
            <h2 class="section-title">เลือกปัญหาการเกษตรที่คุณสนใจ</h2>
            <p class="text-lg leading-relaxed mb-6">คลิกเลือกปัญหาด้านล่างเพื่อดูรายละเอียดและแนวทางการแก้ไขด้วย CoT รูปแบบต่างๆ:</p>
            <div id="problem-buttons-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                </div>
        </section>
        
        <section id="chart-summary" class="content-section">
            <h2 class="section-title">ภาพรวมตัวอย่าง CoT ในแต่ละปัญหา</h2>
            <p class="text-lg leading-relaxed mb-6">แผนภูมินี้แสดงจำนวนตัวอย่างวิธีการแก้ปัญหาด้วย Chain of Thought (CoT) ที่มีให้ศึกษาในแต่ละโจทย์ปัญหาการเกษตร:</p>
            <div class="chart-container">
                <canvas id="cotExamplesChart"></canvas>
            </div>
        </section>

        <section id="problem-details-section" class="content-section hidden">
            <h2 id="selected-problem-title" class="section-title"></h2>
            <p id="selected-problem-description" class="text-lg leading-relaxed mb-6 bg-amber-50 p-4 rounded-md border border-amber-200"></p>
            
            <div id="cot-tabs-container" class="mb-4 overflow-x-auto whitespace-nowrap pb-2">
                </div>
            
            <div id="cot-content-display" class="prompt-answer-card">
                <h3 class="text-xl font-semibold text-green-700 mb-2">Prompt ที่ดี:</h3>
                <pre id="cot-prompt-text" class="bg-stone-100 p-3 rounded-md whitespace-pre-wrap text-sm md:text-base overflow-x-auto"></pre>
                
                <h3 class="text-xl font-semibold text-green-700 mt-6 mb-2">คำตอบที่ได้ (แนวโน้ม) / แนวทางแก้ไขปัญหา:</h3>
                <div id="cot-answer-text" class="text-stone-700 leading-relaxed solution-content"></div>
            </div>
        </section>
    </main>

    <footer class="bg-green-800 text-green-100 p-6 mt-auto">
        <div class="container mx-auto max-w-6xl text-center">
            <p>&copy; 2025 แอปพลิเคชันสำรวจปัญหาการเกษตรด้วย CoT</p>
        </div>
    </footer>

    <script>
        const agriculturalProblemsData = [
            {
                id: 1,
                title: "ผลผลิตมะม่วงตกต่ำ",
                description: "เกษตรกรผู้หนึ่งกำลังประสบปัญหาผลผลิตมะม่วงตกต่ำในปีนี้ โดยพบว่ามะม่วงมีขนาดเล็ก รสชาติจืด และมีร่องรอยคล้ายถูกแมลงศัตรูพืชกัดกินที่ใบและผลบางส่วน เกษตรกรต้องการหาวิธีแก้ไขปัญหาเหล่านี้เพื่อเพิ่มผลผลิตและคุณภาพของมะม่วงในปีถัดไป",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "ช่วยแนะนำวิธีแก้ไขปัญหาผลผลิตมะม่วงตกต่ำ",
                        answer: "<p>แนะนำให้บำรุงดิน ใส่ปุ๋ย ฉีดพ่นยาฆ่าแมลง และตัดแต่งกิ่ง</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรผู้หนึ่งกำลังประสบปัญหาผลผลิตมะม่วงตกต่ำในปีนี้ โดยพบว่ามะม่วงมีขนาดเล็ก รสชาติจืด และมีร่องรอยคล้ายถูกแมลงศัตรูพืชกัดกินที่ใบและผลบางส่วน เกษตรกรต้องการหาวิธีแก้ไขปัญหาเหล่านี้เพื่อเพิ่มผลผลิตและคุณภาพของมะม่วงในปีถัดไป\n\n**คิดทีละขั้นตอน:**\n1. ระบุสาเหตุที่เป็นไปได้ของปัญหาผลผลิตตกต่ำ\n2. เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ\n3. สรุปเป็นแนวทางปฏิบัติที่ชัดเจน",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุสาเหตุที่เป็นไปได้:</strong><ul><li><strong>ขนาดเล็ก รสชาติจืด:</strong> อาจเกิดจากการขาดธาตุอาหาร (ปุ๋ยไม่เพียงพอหรือไม่สมดุล), การให้น้ำไม่เหมาะสม, หรือการติดผลมากเกินไปโดยไม่มีการคัดผล</li><li><strong>ร่องรอยแมลงศัตรูพืช:</strong> บ่งชี้ถึงการเข้าทำลายของแมลง เช่น เพลี้ยอ่อน หนอนเจาะผล หรือไร</li><li><strong>ผลผลิตตกต่ำโดยรวม:</strong> อาจเกิดจากปัจจัยทั้งหมดข้างต้นรวมกัน และอาจรวมถึงการจัดการสวนที่ไม่เหมาะสม เช่น การตัดแต่งกิ่งที่ไม่ถูกวิธี หรือการดูแลสุขอนามัยของสวน</li></ul></li><li><strong>เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ:</strong><ul><li><strong>ขาดธาตุอาหาร/น้ำ:</strong><ul><li><strong>การบำรุงดินและใส่ปุ๋ย:</strong> ตรวจสอบค่า pH ของดิน (ควรอยู่ระหว่าง 6.0-6.5) และเสริมธาตุอาหารหลัก (N-P-K) และธาตุอาหารรองที่จำเป็นสำหรับมะม่วง ควรใส่ปุ๋ยในปริมาณที่เหมาะสมและถูกช่วงเวลา เช่น ช่วงก่อนออกดอกและหลังเก็บเกี่ยว</li><li><strong>การให้น้ำ:</strong> ให้น้ำอย่างสม่ำเสมอและเพียงพอ โดยเฉพาะในช่วงออกดอกและติดผล หลีกเลี่ยงการให้น้ำมากเกินไปจนแฉะ</li></ul></li><li><strong>แมลงศัตรูพืช:</strong><ul><li><strong>การสำรวจและระบุชนิดแมลง:</strong> สำรวจสวนอย่างสม่ำเสมอเพื่อระบุชนิดของแมลงศัตรูพืชที่เข้าทำลาย</li><li><strong>การควบคุมแบบผสมผสาน (IPM):</strong> เริ่มจากการใช้วิธีธรรมชาติ เช่น ปล่อยศัตรูธรรมชาติ ใช้กับดักแสงไฟ/กาวเหลือง หากจำเป็นจึงใช้สารชีวภัณฑ์หรือสารเคมีที่เหมาะสม โดยเลือกใช้สารที่ส่งผลกระทบต่อสิ่งแวดล้อมน้อยที่สุด</li></ul></li><li><strong>การจัดการสวน:</strong><ul><li><strong>การตัดแต่งกิ่ง:</strong> ตัดแต่งกิ่งเพื่อเปิดทรงพุ่มให้แสงส่องถึงได้ทั่วถึง ลดความชื้นสะสม และกำจัดกิ่งที่เสียหายหรือเป็นโรค</li><li><strong>การคัดผล (Fruit Thinning):</strong> หากมีผลดกมากเกินไป ควรคัดผลที่อ่อนแอหรือมีตำหนิทิ้ง เพื่อให้ผลที่เหลือได้รับสารอาหารเต็มที่และมีขนาดใหญ่ขึ้น</li><li><strong>สุขอนามัยของสวน:</strong> กำจัดวัชพืช ซากพืชที่ร่วงหล่น และกิ่งที่เป็นโรคออกจากสวนเพื่อลดแหล่งที่อยู่ของศัตรูพืชและโรค</li></ul></li></ul></li><li><strong>สรุปแนวทางปฏิบัติที่ชัดเจน:</strong><ul><li><strong>วิเคราะห์ดิน:</strong> ส่งตัวอย่างดินไปวิเคราะห์เพื่อทราบค่า pH และธาตุอาหารในดิน</li><li><strong>วางแผนการให้ปุ๋ย:</strong> ใส่ปุ๋ยเคมีสูตร 15-15-15 หรือ 8-24-24 ในระยะก่อนออกดอก และ 13-13-21 ในระยะบำรุงผล ร่วมกับการใส่ปุ๋ยอินทรีย์</li><li><strong>จัดการน้ำ:</strong> ให้น้ำวันละ 1-2 ครั้ง ในช่วงเช้าหรือเย็น โดยสังเกตความชื้นในดิน</li><li><strong>ตรวจสอบและควบคุมแมลง:</strong> สำรวจเพลี้ยอ่อนและหนอนเจาะผลเป็นประจำ หากพบให้ใช้สารชีวภัณฑ์บิวเวอร์เรีย หรือสารเคมีอิมิดาคลอพริด (สำหรับเพลี้ย) และสปินโนแซด (สำหรับหนอน) ตามอัตราที่แนะนำ</li><li><strong>ตัดแต่งกิ่งและคัดผล:</strong> ตัดแต่งกิ่งหลังเก็บเกี่ยว และคัดผลเมื่อมะม่วงมีขนาดเท่าหัวแม่มือ โดยให้เหลือ 1-2 ผลต่อช่อ</li></ul></li></ol>"
                    },
                    {
                        type: "Few-Shot CoT",
                        prompt: "นี่คือตัวอย่างการแก้ปัญหาการเกษตรที่ใช้ Chain of Thought:\n\n**ปัญหา:** ผลผลิตข้าวโพดลดลง ใบเหลือง มีร่องรอยการถูกกัดกิน\n**แนวทางแก้ไข (คิดทีละขั้นตอน):**\n1. **วิเคราะห์ปัญหา:** ข้าวโพดใบเหลืองอาจเกิดจากการขาดธาตุไนโตรเจน ผลผลิตลดลงอาจเกิดจากขาดน้ำหรือธาตุอาหาร ร่องรอยกัดกินบ่งชี้ถึงแมลงศัตรูพืช เช่น หนอนกระทู้ข้าวโพด\n2. **เสนอแนวทาง:**\n    * **บำรุงดิน:** ตรวจสอบ pH ดิน ใส่ปุ๋ยยูเรียเพื่อเพิ่มไนโตรเจน\n    * **การให้น้ำ:** ให้น้ำอย่างสม่ำเสมอโดยเฉพาะช่วงออกดอกติดฝัก\n    * **ควบคุมแมลง:** ใช้สารชีวภัณฑ์ BT หรือกับดักฟีโรโมนสำหรับหนอนกระทู้\n3. **สรุป:** ตรวจสอบดิน, ให้ปุ๋ยไนโตรเจน, ให้น้ำสม่ำเสมอ, ควบคุมแมลงด้วยชีวภัณฑ์\n\nตอนนี้ลองแก้ปัญหานี้:\nเกษตรกรผู้หนึ่งกำลังประสบปัญหาผลผลิตมะม่วงตกต่ำในปีนี้ โดยพบว่ามะม่วงมีขนาดเล็ก รสชาติจืด และมีร่องรอยคล้ายถูกแมลงศัตรูพืชกัดกินที่ใบและผลบางส่วน เกษตรกรต้องการหาวิธีแก้ไขปัญหาเหล่านี้เพื่อเพิ่มผลผลิตและคุณภาพของมะม่วงในปีถัดไป\n\n**แนวทางแก้ไข (คิดทีละขั้นตอน):**",
                        answer: "<h4>แนวทางแก้ไข (คิดทีละขั้นตอน):</h4><ol><li><strong>วิเคราะห์ปัญหา:</strong><ul><li>มะม่วงขนาดเล็ก รสชาติจืด: สาเหตุหลักอาจเกิดจากการขาดธาตุอาหารที่จำเป็น (เช่น โพแทสเซียมสำหรับการเพิ่มรสชาติและขนาดผล), การให้น้ำไม่เหมาะสม, หรือการมีผลดกเกินไปจนสารอาหารไม่พอ</li><li>ร่องรอยแมลงศัตรูพืช: บ่งชี้ถึงการเข้าทำลายของแมลงดูดกินน้ำเลี้ยง (เช่น เพลี้ยแป้ง เพลี้ยอ่อน) หรือแมลงกัดกินใบและผล (เช่น หนอนเจาะผล หนอนกินใบ) ซึ่งส่งผลต่อการสังเคราะห์แสงและคุณภาพผล</li><li>ผลผลิตตกต่ำ: เป็นผลรวมจากการขาดสารอาหาร การถูกทำลายโดยแมลง และการจัดการที่ไม่เหมาะสม</li></ul></li><li><strong>เสนอแนวทางแก้ไข:</strong><ul><li><strong>การจัดการธาตุอาหาร:</strong> ตรวจสอบสภาพดินและใส่ปุ๋ยให้เหมาะสม โดยเน้นปุ๋ยที่มีโพแทสเซียมสูงในช่วงบำรุงผล (เช่น สูตร 0-0-60 หรือ 13-13-21) ควบคู่กับปุ๋ยอินทรีย์เพื่อปรับปรุงโครงสร้างดิน</li><li><strong>การจัดการน้ำ:</strong> ให้น้ำอย่างเพียงพอและสม่ำเสมอ โดยเฉพาะช่วงที่มะม่วงกำลังสร้างผล เพื่อให้ผลเจริญเติบโตเต็มที่ หลีกเลี่ยงการขาดน้ำหรือน้ำท่วมขัง</li><li><strong>การควบคุมแมลงศัตรูพืช:</strong><ul><li><strong>การสำรวจ:</strong> หมั่นสำรวจแปลงเพื่อระบุชนิดของแมลงและระดับความรุนแรงของการระบาด</li><li><strong>การป้องกัน:</strong> ทำความสะอาดสวน กำจัดวัชพืชรอบต้น และตัดแต่งกิ่งที่แน่นทึบเพื่อลดแหล่งอาศัยของแมลง</li><li><strong>การกำจัด:</strong> ใช้ชีวภัณฑ์ เช่น เชื้อราบิวเวอร์เรีย หรือสารสกัดจากสะเดา ในกรณีที่ระบาดรุนแรงอาจพิจารณาใช้สารเคมีที่แนะนำสำหรับมะม่วงอย่างระมัดระวังและตามหลักวิชาการ</li></ul></li><li><strong>การจัดการทรงพุ่มและการคัดผล:</strong><ul><li><strong>ตัดแต่งกิ่ง:</strong> ตัดแต่งกิ่งที่แห้ง ตาย เป็นโรค หรือกิ่งที่ซ้อนกัน เพื่อให้แสงแดดส่องถึงและอากาศถ่ายเทได้ดี</li><li><strong>คัดผล:</strong> เมื่อมะม่วงติดผลมากเกินไป ควรคัดผลที่อ่อนแอ หรือเล็กทิ้ง เพื่อให้ผลที่เหลือได้รับสารอาหารเต็มที่ มีขนาดใหญ่และมีคุณภาพดีขึ้น</li></ul></li></ul></li><li><strong>สรุปแนวทางปฏิบัติ:</strong><ul><li>ส่งดินไปวิเคราะห์เพื่อวางแผนการให้ปุ๋ยที่เหมาะสม</li><li>ให้ปุ๋ยสูตร 13-13-21 หรือ 0-0-60 ในช่วงบำรุงผล ร่วมกับปุ๋ยอินทรีย์</li><li>ให้น้ำอย่างสม่ำเสมอ โดยเฉพาะช่วงออกดอกและติดผล</li><li>หมั่นสำรวจแมลง และใช้ชีวภัณฑ์ในการควบคุมแมลงศัตรูพืช</li><li>ตัดแต่งกิ่ง และคัดผลเมื่อมะม่วงเริ่มติดผล</li></ul></li></ol>"
                    },
                    {
                        type: "Self-Refine CoT",
                        prompt: "**Prompt (ขั้นที่ 1):**\nเกษตรกรผู้หนึ่งกำลังประสบปัญหาผลผลิตมะม่วงตกต่ำในปีนี้ โดยพบว่ามะม่วงมีขนาดเล็ก รสชาติจืด และมีร่องรอยคล้ายถูกแมลงศัตรูพืชกัดกินที่ใบและผลบางส่วน เกษตรกรต้องการหาวิธีแก้ไขปัญหาเหล่านี้เพื่อเพิ่มผลผลิตและคุณภาพของมะม่วงในปีถัดไป\n\n**คิดทีละขั้นตอนและให้คำแนะนำ:**\n\n**(คำตอบที่ได้ (แนวโน้ม - ร่างแรก) จาก Prompt ขั้นที่ 1):**\n\"**คิดทีละขั้นตอนและให้คำแนะนำ:**\n1. **วิเคราะห์:** โตช้า ใบซีด รากสั้น มาจากสารอาหารไม่พอ ออกซิเจนน้อย\n2. **แก้ไข:** เพิ่มปุ๋ย ปรับ pH เพิ่มปั๊มลม\"\n\n**Prompt (ขั้นที่ 2 - เพื่อปรับปรุงคำตอบ):**\nคำตอบข้างต้นยังขาดรายละเอียดและขั้นตอนที่ชัดเจน โปรดพิจารณาจากข้อมูลเดิมและปรับปรุงคำตอบให้ละเอียดและเป็นประโยชน์มากขึ้น โดยเน้นการระบุชนิดของปัญหา การเสนอแนวทางแก้ไขที่เฉพาะเจาะจง และขั้นตอนการปฏิบัติที่ชัดเจน\n\n**คำตอบที่ปรับปรุงแล้ว (คิดทีละขั้นตอน):**",
                        answer: "<h4>คำตอบที่ปรับปรุงแล้ว (คิดทีละขั้นตอน):</h4><ol><li><strong>ระบุปัญหาและสาเหตุที่เป็นไปได้:</strong><ul><li><strong>ขนาดเล็ก รสชาติจืด:</strong> เป็นไปได้ว่าขาดธาตุอาหารหลักและรองที่จำเป็นต่อการเจริญเติบโตของผลและรสชาติ (โดยเฉพาะโพแทสเซียมและโบรอน) หรือได้รับน้ำไม่เพียงพอในช่วงการพัฒนาผล นอกจากนี้ การมีผลดกเกินไปโดยไม่มีการคัดทิ้งก็เป็นสาเหตุหนึ่ง</li><li><strong>ร่องรอยแมลงศัตรูพืช:</strong> บ่งชี้ถึงการเข้าทำลายของแมลงดูดกินน้ำเลี้ยง (เช่น เพลี้ยแป้ง เพลี้ยหอย) หรือแมลงกัดกิน (เช่น หนอนเจาะผล หนอนกินใบ) ซึ่งทำให้พืชอ่อนแอและผลผลิตเสียหาย</li><li><strong>ผลผลิตตกต่ำโดยรวม:</strong> เป็นผลรวมของปัจจัยข้างต้น รวมถึงการจัดการสวนที่ไม่เหมาะสม เช่น การตัดแต่งกิ่งไม่ถูกหลัก</li></ul></li><li><strong>เสนอแนวทางการแก้ไขสำหรับแต่ละปัญหาอย่างละเอียด:</strong><ul><li><strong>การบำรุงดินและธาตุอาหาร:</strong> (รายละเอียดเหมือน Standard CoT)...</li><li><strong>การจัดการน้ำ:</strong> (รายละเอียดเหมือน Standard CoT)...</li><li><strong>การควบคุมแมลงศัตรูพืชแบบผสมผสาน (IPM):</strong> (รายละเอียดเหมือน Standard CoT)...</li><li><strong>การจัดการทรงพุ่มและการคัดผล:</strong> (รายละเอียดเหมือน Standard CoT)...</li></ul></li><li><strong>สรุปขั้นตอนปฏิบัติที่ชัดเจน:</strong><ul><li><strong>เดือนที่ 1:</strong> เก็บตัวอย่างดินส่งวิเคราะห์, ใส่ปุ๋ยอินทรีย์และปุ๋ยเคมีสูตรบำรุงต้น (เช่น 15-15-15), ตัดแต่งกิ่งหลังเก็บเกี่ยว</li><li><strong>เดือนที่ 2-3 (ช่วงเตรียมออกดอก):</strong> ลดการให้น้ำเล็กน้อยเพื่อกระตุ้นการออกดอก</li><li><strong>เดือนที่ 4-5 (ช่วงออกดอก-ติดผลอ่อน):</strong> ให้น้ำอย่างสม่ำเสมอ, ฉีดพ่นธาตุอาหารรองทางใบ, หมั่นสำรวจและควบคุมเพลี้ย/หนอนที่เข้าทำลายดอกและผลอ่อน, ทำการคัดผล</li><li><strong>เดือนที่ 6-7 (ช่วงขยายผล):</strong> ให้น้ำอย่างสม่ำเสมอ, ใส่ปุ๋ยบำรุงผล (เช่น 13-13-21), ควบคุมแมลงศัตรูพืชที่อาจเข้าทำลายผล</li><li><strong>ทำต่อเนื่อง:</strong> หมั่นสำรวจสวนสม่ำเสมอ เพื่อปรับการดูแลให้เข้ากับสภาพอากาศและปัญหาที่พบ</li></ul></li></ol>"
                    },
                    {
                        type: "Tree of Thought CoT",
                        prompt: "เกษตรกรผู้หนึ่งกำลังประสบปัญหาผลผลิตมะม่วงตกต่ำในปีนี้ โดยพบว่ามะม่วงมีขนาดเล็ก รสชาติจืด และมีร่องรอยคล้ายถูกแมลงศัตรูพืชกัดกินที่ใบและผลบางส่วน เกษตรกรต้องการหาวิธีแก้ไขปัญหาเหล่านี้เพื่อเพิ่มผลผลิตและคุณภาพของมะม่วงในปีถัดไป\n\n**จงพิจารณาแนวทางแก้ไขที่เป็นไปได้หลายๆ ทางเลือก และประเมินข้อดีข้อเสียของแต่ละทางเลือก ก่อนที่จะสรุปแนวทางที่ดีที่สุด**",
                        answer: "<h4>การวิเคราะห์ปัญหา:</h4><p>จากข้อมูลที่ให้มา ปัญหามะม่วงผลผลิตตกต่ำ มะม่วงขนาดเล็กและรสชาติจืด และมีร่องรอยแมลงศัตรูพืชกัดกิน สามารถแยกสาเหตุหลักได้ดังนี้: ...</p><h4>การพิจารณาแนวทางแก้ไข (Tree of Thought):</h4><p><strong>ทางเลือกที่ 1: เน้นการบำรุงธาตุอาหารและการให้น้ำ</strong>...</p><p><strong>ทางเลือกที่ 2: เน้นการควบคุมแมลงศัตรูพืช</strong>...</p><p><strong>ทางเลือกที่ 3: เน้นการจัดการสวนแบบองค์รวม (Integrated Farm Management)</strong>...</p><h4>การประเมินและสรุปแนวทางที่ดีที่สุด:</h4><p>จากการพิจารณาทุกทางเลือกที่กล่าวมา **แนวทางที่ 3.3 (การผสมผสานการจัดการสวนแบบองค์รวม) เป็นแนวทางที่ดีที่สุดและยั่งยืนที่สุด** ...</p><h4>แนวทางปฏิบัติที่แนะนำ:</h4><ol><li><strong>วิเคราะห์ดิน:</strong> ...</li><li><strong>การบำรุงดินและปุ๋ย:</strong> ...</li><li><strong>การจัดการน้ำ:</strong> ...</li><li><strong>การควบคุมแมลงศัตรูพืช:</strong> ...</li><li><strong>การจัดการทรงพุ่มและการคัดผล:</strong> ...</li></ol>"
                    }
                ]
            },
            {
                id: 2,
                title: "การเพาะปลูกผักกาดหอมไฮโดรโปนิกส์",
                description: "เกษตรกรต้องการปลูกผักกาดหอมในระบบไฮโดรโปนิกส์ แต่ประสบปัญหาผักเจริญเติบโตช้า ใบมีสีซีด และรากสั้น เกษตรกรต้องการคำแนะนำในการปรับปรุงการปลูกเพื่อเพิ่มอัตราการเจริญเติบโตและคุณภาพของผักกาดหอม",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "ผักกาดหอมไฮโดรโปนิกส์โตช้า ใบซีด รากสั้น ทำยังไงดี?",
                        answer: "<p>ให้สารละลายธาตุอาหารเพิ่มขึ้น และปรับ pH น้ำ</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรต้องการปลูกผักกาดหอมในระบบไฮโดรโปนิกส์ แต่ประสบปัญหาผักเจริญเติบโตช้า ใบมีสีซีด และรากสั้น เกษตรกรต้องการคำแนะนำในการปรับปรุงการปลูกเพื่อเพิ่มอัตราการเจริญเติบโตและคุณภาพของผักกาดหอม\n\n**คิดทีละขั้นตอน:**\n1. ระบุสาเหตุที่เป็นไปได้ของปัญหา\n2. เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ\n3. สรุปเป็นแนวทางปฏิบัติที่ชัดเจน",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุสาเหตุที่เป็นไปได้:</strong><ul><li><strong>เจริญเติบโตช้า, ใบซีด:</strong> อาจเกิดจากการขาดสารอาหารที่จำเป็น (โดยเฉพาะไนโตรเจน เหล็ก หรือธาตุอาหารรองอื่นๆ), ความเข้มข้นของสารละลายธาตุอาหารไม่เหมาะสม, ค่า pH ของสารละลายไม่ถูกต้องทำให้พืชดูดซึมธาตุอาหารไม่ได้, หรือแสงไม่เพียงพอ</li><li><strong>รากสั้น:</strong> อาจเกิดจากออกซิเจนในสารละลายไม่เพียงพอ, สารละลายธาตุอาหารมีความเข้มข้นสูงเกินไปจนเป็นพิษต่อราก, หรืออุณหภูมิของสารละลายไม่เหมาะสม</li></ul></li><li><strong>เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ:</strong><ul><li><strong>สารอาหารไม่เพียงพอ/ไม่สมดุล:</strong><ul><li><strong>ตรวจสอบและปรับความเข้มข้นของสารละลาย:</strong> ใช้เครื่องวัด EC (Electrical Conductivity) เพื่อวัดค่าความเข้มข้นของสารละลายธาตุอาหารให้อยู่ในช่วงที่เหมาะสมสำหรับผักกาดหอม (ประมาณ 1.2-1.8 EC)</li><li><strong>ตรวจสอบและปรับค่า pH:</strong> ใช้เครื่องวัด pH เพื่อวัดค่า pH ของสารละลายให้อยู่ในช่วง 5.5-6.5 ซึ่งเป็นช่วงที่พืชดูดซึมธาตุอาหารได้ดีที่สุด หากค่า pH สูงหรือต่ำเกินไป ให้ใช้ pH Up/pH Down ปรับ</li><li><strong>พิจารณาสูตรสารละลายธาตุอาหาร:</strong> ตรวจสอบว่าสูตรสารละลายที่ใช้มีธาตุอาหารครบถ้วนและสมดุลหรือไม่ โดยเฉพาะไนโตรเจนสำหรับการเจริญเติบโตของใบ และเหล็กสำหรับการสร้างคลอโรฟิลล์</li></ul></li><li><strong>แสงไม่เพียงพอ:</strong><ul><li><strong>เพิ่มความเข้มแสง:</strong> หากปลูกในที่ร่มหรือมีแสงน้อย อาจต้องพิจารณาติดตั้งไฟปลูก (Grow Light) ที่มีความเข้มแสงและสเปกตรัมที่เหมาะสมต่อการสังเคราะห์แสงของผักกาดหอม</li></ul></li><li><strong>ออกซิเจนในสารละลายไม่เพียงพอ:</strong><ul><li><strong>เพิ่มการเติมอากาศ:</strong> ตรวจสอบปั๊มลมและหัวทรายว่าทำงานได้ดีหรือไม่ หากจำเป็นให้เพิ่มปั๊มลมหรือหัวทราย เพื่อเพิ่มปริมาณออกซิเจนในสารละลาย ซึ่งสำคัญต่อการหายใจและการเจริญเติบโตของราก</li><li><strong>ควบคุมอุณหภูมิสารละลาย:</strong> อุณหภูมิของสารละลายที่สูงเกินไปจะลดปริมาณออกซิเจนที่ละลายน้ำได้ ควรควบคุมอุณหภูมิให้อยู่ในช่วง 20-25 องศาเซลเซียส</li></ul></li><li><strong>สารละลายเข้มข้นเกินไป:</strong><ul><li><strong>เจือจางสารละลาย:</strong> หากค่า EC สูงเกินไป ให้เติมน้ำสะอาดลงไปเพื่อเจือจางสารละลาย</li></ul></li></ul></li><li><strong>สรุปแนวทางปฏิบัติที่ชัดเจน:</strong><ul><li><strong>วันแรก:</strong> วัดค่า EC และ pH ของสารละลาย ปรับค่า pH ให้อยู่ในช่วง 5.5-6.5 และปรับ EC ให้อยู่ในช่วง 1.2-1.8</li><li><strong>ทุกวัน:</strong> ตรวจสอบระดับน้ำในถังสารละลายและเติมน้ำสะอาดเพื่อชดเชยที่พืชดูดซึมไป</li><li><strong>ทุก 3-5 วัน:</strong> ตรวจสอบค่า EC และ pH อีกครั้ง และปรับตามความเหมาะสม</li><li><strong>ทุก 7-10 วัน:</strong> เปลี่ยนถ่ายสารละลายธาตุอาหารใหม่ทั้งหมด เพื่อป้องกันการสะสมของธาตุอาหารบางชนิดหรือเชื้อโรค</li><li><strong>ตรวจสอบระบบเติมอากาศ:</strong> ตรวจสอบการทำงานของปั๊มลมและหัวทรายว่ามีฟองอากาศออกมาเพียงพอหรือไม่</li></ul></li></ol>"
                    },
                    {
                        type: "Few-Shot CoT",
                        prompt: "นี่คือตัวอย่างการแก้ปัญหาการเกษตรที่ใช้ Chain of Thought:\n\n**ปัญหา:** ต้นกล้ามะเขือเทศงอกช้า ต้นไม่แข็งแรง\n**แนวทางแก้ไข (คิดทีละขั้นตอน):**\n1. **วิเคราะห์ปัญหา:** อุณหภูมิไม่เหมาะสม, เมล็ดเก่าหรือไม่มีคุณภาพ, แสงไม่เพียงพอ\n2. **เสนอแนวทาง:**\n    * ควบคุมอุณหภูมิให้เหมาะสม (25-30 องศาเซลเซียส)\n    * เลือกใช้เมล็ดพันธุ์ใหม่ที่มีคุณภาพ\n    * ให้แสงที่เพียงพอสำหรับต้นกล้า\n3. **สรุป:** ปรับอุณหภูมิ, เปลี่ยนเมล็ด, เพิ่มแสง\n\nตอนนี้ลองแก้ปัญหานี้:\nเกษตรกรต้องการปลูกผักกาดหอมในระบบไฮโดรโปนิกส์ แต่ประสบปัญหาผักเจริญเติบโตช้า ใบมีสีซีด และรากสั้น เกษตรกรต้องการคำแนะนำในการปรับปรุงการปลูกเพื่อเพิ่มอัตราการเจริญเติบโตและคุณภาพของผักกาดหอม\n\n**แนวทางแก้ไข (คิดทีละขั้นตอน):**",
                        answer: "<h4>แนวทางแก้ไข (คิดทีละขั้นตอน):</h4><ol><li><strong>วิเคราะห์ปัญหา:</strong><ul><li><strong>เจริญเติบโตช้า, ใบซีด:</strong> อาจเกิดจากสารอาหารไม่สมดุล (EC/pH ไม่เหมาะสม), หรือขาดแสง</li><li><strong>รากสั้น:</strong> อาจเกิดจากออกซิเจนในน้ำไม่พอ, อุณหภูมิน้ำสูงเกินไป หรือสารละลายเข้มข้นเกินไป</li></ul></li><li><strong>เสนอแนวทางแก้ไข:</strong><ul><li><strong>สารละลายธาตุอาหาร:</strong> ตรวจสอบ <strong>EC</strong> (1.2-1.8) และ <strong>pH</strong> (5.5-6.5) ของสารละลาย ปรับให้เหมาะสมและเปลี่ยนถ่ายสารละลายสม่ำเสมอ</li><li><strong>แสง:</strong> ตรวจสอบความเข้มแสงให้เพียงพอ หรือเพิ่ม <strong>ไฟปลูก</strong></li><li><strong>ออกซิเจน/อุณหภูมิน้ำ:</strong> ตรวจสอบ <strong>ปั๊มลมและหัวทราย</strong> เพื่อเพิ่มออกซิเจนในน้ำ และควบคุม <strong>อุณหภูมิของสารละลาย</strong> ไม่ให้สูงเกินไป</li></ul></li><li><strong>สรุปแนวทางปฏิบัติ:</strong> ตรวจสอบ EC/pH, ปรับสารละลาย, เพิ่มแสง, ตรวจสอบการเติมอากาศและอุณหภูมิน้ำ</li></ol>"
                    },
                    {
                        type: "Self-Refine CoT",
                        prompt: "**Prompt (ขั้นที่ 1):**\nเกษตรกรต้องการปลูกผักกาดหอมในระบบไฮโดรโปนิกส์ แต่ประสบปัญหาผักเจริญเติบโตช้า ใบมีสีซีด และรากสั้น เกษตรกรต้องการคำแนะนำในการปรับปรุงการปลูกเพื่อเพิ่มอัตราการเจริญเติบโตและคุณภาพของผักกาดหอม\n\n**คิดทีละขั้นตอนและให้คำแนะนำ:**\n\n**(คำตอบที่ได้ (แนวโน้ม - ร่างแรก) จาก Prompt ขั้นที่ 1):**\n\"**คิดทีละขั้นตอนและให้คำแนะนำ:**\n1. **วิเคราะห์:** โตช้า ใบซีด รากสั้น มาจากสารอาหารไม่พอ ออกซิเจนน้อย\n2. **แก้ไข:** เพิ่มปุ๋ย ปรับ pH เพิ่มปั๊มลม\"\n\n**Prompt (ขั้นที่ 2 - เพื่อปรับปรุงคำตอบ):**\nคำตอบข้างต้นยังขาดรายละเอียดและขั้นตอนที่ชัดเจน โปรดพิจารณาจากข้อมูลเดิมและปรับปรุงคำตอบให้ละเอียดและเป็นประโยชน์มากขึ้น โดยเน้นการระบุชนิดของปัญหา การเสนอแนวทางแก้ไขที่เฉพาะเจาะจง และขั้นตอนการปฏิบัติที่ชัดเจน\n\n**คำตอบที่ปรับปรุงแล้ว (คิดทีละขั้นตอน):**",
                        answer: "<h4>คำตอบที่ปรับปรุงแล้ว (คิดทีละขั้นตอน):</h4><ol><li><strong>ระบุปัญหาและสาเหตุที่เป็นไปได้:</strong><ul><li><strong>เจริญเติบโตช้า, ใบซีด:</strong> ปัญหานี้มักบ่งชี้ถึง <strong>การขาดสารอาหาร</strong> โดยเฉพาะไนโตรเจนและธาตุเหล็ก หรืออาจเกิดจาก <strong>ค่า pH ของสารละลายไม่เหมาะสม</strong> ทำให้พืชดูดซึมธาตุอาหารไม่ได้ นอกจากนี้ <strong>แสงที่ไม่เพียงพอ</strong> ก็เป็นปัจจัยสำคัญที่ทำให้พืชสังเคราะห์แสงได้น้อยลง</li><li><strong>รากสั้น:</strong> สภาวะนี้บ่งชี้ว่ารากไม่สามารถพัฒนาได้อย่างเต็มที่ ซึ่งอาจเกิดจาก <strong>ปริมาณออกซิเจนที่ละลายในสารละลายไม่เพียงพอ</strong> (การเติมอากาศไม่ดี), <strong>อุณหภูมิของสารละลายสูงเกินไป</strong> (ทำให้ปริมาณออกซิเจนลดลง), หรือ <strong>ความเข้มข้นของสารละลายธาตุอาหารสูงเกินไป</strong> จนเป็นพิษต่อราก</li></ul></li><li><strong>เสนอแนวทางการแก้ไขสำหรับแต่ละปัญหาอย่างละเอียด:</strong><ul><li><strong>การจัดการสารละลายธาตุอาหาร:</strong><ul><li><strong>วัดและปรับค่า EC:</strong> ใช้เครื่องวัด EC เพื่อให้มั่นใจว่าค่าความเข้มข้นของสารละลายอยู่ในช่วงที่เหมาะสมสำหรับผักกาดหอม (ประมาณ 1.2-1.8 mS/cm) หากต่ำไปให้เพิ่มสารละลาย หากสูงไปให้เจือจางด้วยน้ำสะอาด</li><li><strong>วัดและปรับค่า pH:</strong> ใช้เครื่องวัด pH เพื่อรักษาค่า pH ของสารละลายให้อยู่ในช่วง 5.5-6.5 ซึ่งเป็นช่วงที่ธาตุอาหารส่วนใหญ่ละลายและพืชสามารถดูดซึมได้ดีที่สุด ใช้ pH Up/pH Down ในการปรับ</li><li><strong>การเปลี่ยนถ่ายสารละลาย:</strong> ควรเปลี่ยนถ่ายสารละลายธาตุอาหารใหม่ทั้งหมดทุก 7-10 วัน เพื่อป้องกันการสะสมของธาตุอาหารที่ไม่จำเป็น หรือเชื้อโรค</li></ul></li><li><strong>การจัดการแสง:</strong><ul><li><strong>ตรวจสอบความเข้มแสง:</strong> ผักกาดหอมต้องการแสงอย่างน้อย 6 ชั่วโมงต่อวัน หากปลูกในที่ร่มหรือมีเมฆมาก ควรพิจารณาใช้ไฟปลูก (LED Grow Light) ที่มีสเปกตรัมเหมาะสมเพื่อเสริมการสังเคราะห์แสง</li></ul></li><li><strong>การจัดการออกซิเจนและอุณหภูมิสารละลาย:</strong><ul><li><strong>ตรวจสอบระบบเติมอากาศ:</strong> ตรวจสอบปั๊มลมและหัวทรายว่าทำงานได้ดี มีฟองอากาศออกมาอย่างสม่ำเสมอหรือไม่ หากไม่พอ ให้เพิ่มประสิทธิภาพการเติมอากาศ</li><li><strong>ควบคุมอุณหภูมิสารละลาย:</strong> พยายามรักษาอุณหภูมิของสารละลายให้อยู่ในช่วง 20-25 องศาเซลเซียส การใช้น้ำเย็นเติม หรือติดตั้งพัดลมช่วยระบายความร้อน อาจช่วยได้</li></ul></li></ul></li><li><strong>สรุปขั้นตอนปฏิบัติที่ชัดเจน:</strong><ul><li><strong>ทุกวัน:</strong> ตรวจสอบระดับน้ำในถังสารละลายและเติมน้ำสะอาดชดเชยที่พืชดูดซึมไป</li><li><strong>ทุก 1-2 วัน:</strong> วัดค่า pH และ EC ของสารละลาย ปรับค่าตามความเหมาะสม</li><li><strong>ทุก 7-10 วัน:</strong> เปลี่ยนถ่ายสารละลายธาตุอาหารใหม่ทั้งหมด</li><li><strong>ตรวจสอบอุปกรณ์:</strong> ตรวจสอบการทำงานของปั๊มลมและหัวทรายเป็นประจำ</li><li><strong>สังเกตอาการพืช:</strong> หมั่นสังเกตอาการของผักกาดหอมอย่างใกล้ชิด หากพบอาการผิดปกติให้รีบแก้ไข</li></ul></li></ol>"
                    }
                ]
            },
            {
                id: 3,
                title: "โรคใบด่างในมะละกอ",
                description: "เกษตรกรพบว่ามะละกอที่ปลูกในสวนมีอาการใบด่างเหลืองผิดปกติ ลำต้นและก้านใบมีรอยช้ำ และผลที่ออกมามีลักษณะเป็นปุ่มปม ไม่เป็นรูปทรงสวยงาม ทำให้ไม่สามารถขายได้ เกษตรกรสงสัยว่ามะละกอเป็นโรคอะไรและมีวิธีป้องกัน/รักษาอย่างไร",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "มะละกอใบด่าง ผลปม เกิดจากอะไร แก้ไขยังไง?",
                        answer: "<p>น่าจะเป็นโรคใบด่างไวรัส ให้ถอนทิ้งและพ่นยา</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรพบว่ามะละกอที่ปลูกในสวนมีอาการใบด่างเหลืองผิดปกติ ลำต้นและก้านใบมีรอยช้ำ และผลที่ออกมามีลักษณะเป็นปุ่มปม ไม่เป็นรูปทรงสวยงาม ทำให้ไม่สามารถขายได้ เกษตรกรสงสัยว่ามะละกอเป็นโรคอะไรและมีวิธีป้องกัน/รักษาอย่างไร\n\n**คิดทีละขั้นตอน:**\n1. ระบุโรคที่เป็นไปได้จากอาการ\n2. อธิบายวิธีการแพร่ระบาดของโรค\n3. เสนอแนวทางการป้องกันและควบคุม",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุโรคที่เป็นไปได้จากอาการ:</strong><ul><li>อาการใบด่างเหลืองผิดปกติ, ลำต้นและก้านใบมีรอยช้ำ, ผลที่ออกมามีลักษณะเป็นปุ่มปม ไม่เป็นรูปทรงสวยงาม <strong>บ่งชี้อย่างชัดเจนว่าเป็นโรคใบด่างจุดวงแหวนของมะละกอ (Papaya Ringspot Virus - PRSV)</strong> ซึ่งเป็นโรคที่สำคัญและทำความเสียหายรุนแรงต่อการปลูกมะละกอ</li></ul></li><li><strong>อธิบายวิธีการแพร่ระบาดของโรค:</strong><ul><li>โรค PRSV เกิดจากเชื้อไวรัส และมี <strong>เพลี้ยอ่อน</strong> เป็นพาหะสำคัญในการแพร่เชื้อ โดยเพลี้ยอ่อนจะดูดกินน้ำเลี้ยงจากต้นมะละกอที่เป็นโรค และนำเชื้อไปถ่ายทอดให้กับต้นมะละกอที่ยังไม่เป็นโรค การแพร่ระบาดจะรวดเร็วมาก โดยเฉพาะในช่วงที่มีเพลี้ยอ่อนชุกชุม</li><li>นอกจากนี้ เชื้อไวรัสอาจติดมากับเมล็ดพันธุ์ หรือการขยายพันธุ์โดยวิธีอื่นๆ ที่ไม่สะอาด</li></ul></li><li><strong>เสนอแนวทางการป้องกันและควบคุม:</strong><ul><li><strong>การเลือกใช้พันธุ์ต้านทาน:</strong> หากเป็นไปได้ ควรเลือกปลูกมะละกอพันธุ์ที่ต้านทานต่อโรค PRSV หากมี (ในประเทศไทยยังหาพันธุ์ที่ต้านทานสมบูรณ์ได้ยาก)</li><li><strong>การควบคุมพาหะ (เพลี้ยอ่อน):</strong><ul><li><strong>กำจัดวัชพืช:</strong> กำจัดวัชพืชรอบๆ แปลงปลูก เพราะวัชพืชบางชนิดอาจเป็นแหล่งอาศัยของเพลี้ยอ่อน</li><li><strong>ใช้กับดักกาวเหลือง:</strong> ติดตั้งกับดักกาวเหลืองเพื่อดักจับเพลี้ยอ่อน</li><li><strong>ใช้สารชีวภัณฑ์/สารสกัดธรรมชาติ:</strong> เช่น สารสกัดจากสะเดา หรือเชื้อราบิวเวอร์เรีย เพื่อควบคุมเพลี้ยอ่อน</li><li><strong>ใช้สารเคมี (กรณีจำเป็น):</strong> หากมีการระบาดของเพลี้ยอ่อนรุนแรง ให้ใช้สารเคมีกำจัดแมลงจำพวกดูดซึม เช่น อิมิดาคลอพริด (Imidacloprid) หรือไดโนทีฟูแรน (Dinotefuran) ตามอัตราที่แนะนำ โดยฉีดพ่นเฉพาะเมื่อจำเป็น</li></ul></li><li><strong>การสุขาภิบาลแปลงปลูก:</strong><ul><li><strong>ถอนทำลายต้นที่เป็นโรค:</strong> <strong>สิ่งที่สำคัญที่สุด</strong> คือการถอนทำลายต้นมะละกอที่แสดงอาการโรคทันทีที่พบ และนำไปเผาทำลายหรือฝังกลบให้มิดชิด เพื่อไม่ให้เป็นแหล่งแพร่เชื้อ</li><li><strong>ปลูกพืชหมุนเวียน:</strong> หลีกเลี่ยงการปลูกมะละกอซ้ำในแปลงเดิมทันที ควรพักดินหรือปลูกพืชชนิดอื่นที่ไม่ใช่พืชอาศัยของไวรัสนี้</li></ul></li><li><strong>การปลูกพืชกั้น:</strong> ปลูกพืชที่มีความสูง เช่น ข้าวโพด ข้าวฟ่าง หรือทานตะวัน รอบๆ แปลงมะละกอ เพื่อเป็นกำแพงป้องกันการเข้าทำลายของเพลี้ยอ่อน</li></ul></li></ol>"
                    }
                ]
            },
            {
                id: 4,
                title: "การบำรุงดูแลรักษาทุเรียน",
                description: "เกษตรกรพบว่าต้นทุเรียนที่ปลูกใหม่มีอาการใบร่วงผิดปกติ ใบที่เหลือมีสีเหลืองซีด และการแตกยอดใหม่เป็นไปอย่างเชื่องช้า ทำให้ต้นทุเรียนไม่เจริญเติบโตตามที่ควร เกษตรกรต้องการคำแนะนำในการบำรุงดูแลรักษาต้นทุเรียนให้แข็งแรงและเจริญเติบโตได้ดี",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "ทุเรียนใบร่วง ใบเหลือง แตกยอดช้า ทำไงดี?",
                        answer: "<p>ใส่ปุ๋ยบำรุง ฉีดฮอร์โมน และให้น้ำ</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรพบว่าต้นทุเรียนที่ปลูกใหม่มีอาการใบร่วงผิดปกติ ใบที่เหลือมีสีเหลืองซีด และการแตกยอดใหม่เป็นไปอย่างเชื่องช้า ทำให้ต้นทุเรียนไม่เจริญเติบโตตามที่ควร เกษตรกรต้องการคำแนะนำในการบำรุงดูแลรักษาต้นทุเรียนให้แข็งแรงและเจริญเติบโตได้ดี\n\n**คิดทีละขั้นตอน:**\n1. ระบุสาเหตุที่เป็นไปได้ของอาการใบร่วง ใบเหลือง และแตกยอดช้า\n2. เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ\n3. สรุปเป็นแนวทางปฏิบัติในการบำรุงดูแลรักษา",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุสาเหตุที่เป็นไปได้ของอาการใบร่วง ใบเหลือง และแตกยอดช้า:</strong><ul><li><strong>ใบร่วงผิดปกติ:</strong> อาจเกิดจากการให้น้ำมากเกินไป (น้ำขังแฉะ), รากเน่า, การขาดน้ำอย่างรุนแรง, การเปลี่ยนแปลงสภาพอากาศกะทันหัน, หรือการเข้าทำลายของโรค/แมลงบางชนิด</li><li><strong>ใบเหลืองซีด:</strong> มักเกิดจากการขาดธาตุอาหาร โดยเฉพาะไนโตรเจน (N), เหล็ก (Fe), สังกะสี (Zn) หรือการที่ดินมีความเป็นกรด-ด่างไม่เหมาะสม ทำให้พืชดูดซึมธาตุอาหารไม่ได้</li><li><strong>การแตกยอดใหม่เชื่องช้า:</strong> เป็นผลรวมจากการที่ต้นอ่อนแอ ไม่ได้รับสารอาหารที่เพียงพอ หรือมีปัญหาที่ราก ทำให้ระบบดูดซึมทำงานได้ไม่ดี</li></ul></li><li><strong>เสนอแนวทางการแก้ไขสำหรับแต่ละสาเหตุ:</strong><ul><li><strong>การจัดการน้ำ:</strong><ul><li><strong>ตรวจสอบความชื้นในดิน:</strong> ใช้วิธีการสังเกตหรือใช้เครื่องวัดความชื้นในดิน เพื่อให้น้ำอย่างเหมาะสม ไม่ให้น้ำมากเกินไปจนดินแฉะ ซึ่งเป็นสาเหตุหลักของรากเน่าในทุเรียน</li><li><strong>การระบายน้ำ:</strong> ตรวจสอบระบบระบายน้ำรอบโคนต้นและในแปลงปลูก หากดินมีสภาพเป็นดินเหนียว ควรยกร่องหรือทำทางระบายน้ำให้ดี</li><li><strong>การให้น้ำอย่างสม่ำเสมอ:</strong> หากดินแห้งเกินไป ควรให้น้ำอย่างสม่ำเสมอแต่พอดี โดยเฉพาะในช่วงหน้าแล้ง</li></ul></li><li><strong>การจัดการธาตุอาหารและการปรับปรุงดิน:</strong><ul><li><strong>การวิเคราะห์ดิน:</strong> แนะนำให้ส่งตัวอย่างดินไปวิเคราะห์ เพื่อทราบค่า pH ของดิน และปริมาณธาตุอาหารที่ขาดไป</li><li><strong>การปรับปรุงดิน:</strong> หากดินมีความเป็นกรดสูง ควรใส่ปูนขาว หรือโดโลไมท์ เพื่อปรับค่า pH ของดินให้อยู่ในช่วงที่เหมาะสม (ประมาณ 5.5-6.5)</li><li><strong>การให้ปุ๋ย:</strong><ul><li><strong>ปุ๋ยอินทรีย์:</strong> ใส่ปุ๋ยหมัก ปุ๋ยคอก หรือปุ๋ยอินทรีย์เม็ด รอบโคนต้น เพื่อปรับปรุงโครงสร้างดิน เพิ่มอินทรียวัตถุ และช่วยให้ดินอุ้มน้ำได้ดีขึ้น</li><li><strong>ปุ๋ยเคมี:</strong> ควรให้ปุ๋ยเคมีสูตรเสมอ (เช่น 15-15-15) หรือสูตรเน้นไนโตรเจน (เช่น 25-7-7) ในระยะบำรุงต้นอ่อน โดยใส่ในปริมาณน้อยๆ แต่สม่ำเสมอ</li><li><strong>ธาตุอาหารรอง:</strong> หากพบอาการขาดธาตุอาหารรอง เช่น เหลืองซีดที่ปลายยอด อาจพ่นปุ๋ยทางใบที่มีธาตุเหล็ก สังกะสี แมงกานีส</li></ul></li></ul></li><li><strong>การควบคุมโรคและแมลง:</strong><ul><li><strong>สำรวจโรครากเน่าโคนเน่า:</strong> ตรวจสอบอาการรากเน่าโคนเน่า หากพบอาการ ให้ใช้สารเคมีป้องกันกำจัดเชื้อรา เช่น เมทาแลกซิล (Metalaxyl) หรือฟอสอีทิล-อะลูมิเนียม (Fosetyl-aluminium) ราดรอบโคนต้น</li><li><strong>ควบคุมแมลงศัตรูพืช:</strong> หากมีแมลงศัตรูพืชเข้าทำลาย เช่น เพลี้ย หอยทาก ให้ใช้วิธีการควบคุมที่เหมาะสม</li></ul></li></ul></li><li><strong>สรุปเป็นแนวทางปฏิบัติในการบำรุงดูแลรักษา:</strong><ul><li><strong>ให้น้ำอย่างเหมาะสม:</strong> ตรวจสอบความชื้นในดินก่อนให้น้ำ ไม่ให้น้ำขังแฉะ</li><li><strong>ปรับปรุงดิน:</strong> ใส่ปุ๋ยอินทรีย์ และปรับค่า pH ของดินให้อยู่ในระดับที่เหมาะสม</li><li><strong>ให้ปุ๋ยบำรุงต้น:</strong> ใช้ปุ๋ยเคมีสูตรเสมอ หรือเน้นไนโตรเจนในปริมาณน้อยๆ สม่ำเสมอ และพ่นธาตุอาหารรองทางใบ</li><li><strong>ป้องกันโรคและแมลง:</strong> หมั่นสำรวจอาการโรครากเน่าโคนเน่า และควบคุมแมลงศัตรูพืช</li></ul></li></ol>"
                    }
                ]
            },
            {
                id: 5,
                title: "การเก็บเกี่ยวและหลังการเก็บเกี่ยวส้มโอ",
                description: "เกษตรกรปลูกส้มโอเพื่อการส่งออก แต่ประสบปัญหาผลส้มโอเสียหายจากการขนส่งบ่อยครั้ง เช่น ผลช้ำ เปลือกแตก หรือเกิดโรคเน่าเสียหลังการเก็บเกี่ยว ทำให้มูลค่าผลผลิตลดลง เกษตรกรต้องการทราบแนวทางปฏิบัติที่ถูกต้องในการเก็บเกี่ยวและจัดการหลังการเก็บเกี่ยวเพื่อลดความเสียหาย",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "ส้มโอช้ำ แตก เน่า หลังเก็บเกี่ยวและขนส่ง ทำไงดี?",
                        answer: "<p>เก็บเกี่ยวระวังๆ ห่อผล และขนส่งให้ดี</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรปลูกส้มโอเพื่อการส่งออก แต่ประสบปัญหาผลส้มโอเสียหายจากการขนส่งบ่อยครั้ง เช่น ผลช้ำ เปลือกแตก หรือเกิดโรคเน่าเสียหลังการเก็บเกี่ยว ทำให้มูลค่าผลผลิตลดลง เกษตรกรต้องการทราบแนวทางปฏิบัติที่ถูกต้องในการเก็บเกี่ยวและจัดการหลังการเก็บเกี่ยวเพื่อลดความเสียหาย\n\n**คิดทีละขั้นตอน:**\n1. ระบุปัจจัยที่ทำให้เกิดความเสียหายหลังการเก็บเกี่ยว\n2. เสนอแนวทางการปฏิบัติในการเก็บเกี่ยวที่ถูกต้อง\n3. เสนอแนวทางการจัดการหลังการเก็บเกี่ยวเพื่อลดความเสียหาย",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุปัจจัยที่ทำให้เกิดความเสียหายหลังการเก็บเกี่ยว:</strong><ul><li><strong>ผลช้ำ/เปลือกแตก:</strong> เกิดจากการเก็บเกี่ยวที่รุนแรง, การบรรจุหีบห่อที่ไม่เหมาะสม, การตกหล่น, การกระแทกระหว่างการขนส่ง, หรือการวางซ้อนทับกันมากเกินไป</li><li><strong>โรคเน่าเสียหลังการเก็บเกี่ยว:</strong> เกิดจากเชื้อราหรือแบคทีเรียที่เข้าทำลายผ่านรอยแผลที่เกิดขึ้นระหว่างการเก็บเกี่ยวหรือการจัดการ, การสัมผัสกับผลที่เป็นโรค, สภาพแวดล้อมที่มีความชื้นสูงและการระบายอากาศไม่ดี</li><li><strong>ความไม่สมบูรณ์ของผล:</strong> การเก็บเกี่ยวผลที่ยังไม่แก่จัด หรือผลที่แก่เกินไป</li></ul></li><li><strong>เสนอแนวทางการปฏิบัติในการเก็บเกี่ยวที่ถูกต้อง:</strong><ul><li><strong>กำหนดระยะเก็บเกี่ยวที่เหมาะสม:</strong> เก็บเกี่ยวส้มโอเมื่อผลมีอายุแก่จัดตามกำหนดของพันธุ์ (เช่น 8-9 เดือนสำหรับพันธุ์ขาวแตงกวา) สังเกตจากสีผิวที่เริ่มเหลืองอมเขียวเล็กน้อย หรือมีกลิ่นหอมเฉพาะตัว</li><li><strong>ใช้อุปกรณ์ที่เหมาะสม:</strong> ใช้กรรไกรคมๆ ในการตัดขั้วผล โดยให้เหลือขั้วติดผลไว้ประมาณ 0.5-1 เซนติเมตร เพื่อป้องกันการเกิดแผลและลดการคายน้ำ</li><li><strong>เก็บเกี่ยวด้วยความระมัดระวัง:</strong> หลีกเลี่ยงการทำผลตกหล่น หรือกระแทกกัน ควรใช้ตะกร้าหรือภาชนะที่มีขอบเรียบและรองด้วยวัสดุนุ่ม</li><li><strong>เก็บเกี่ยวในช่วงเวลาที่เหมาะสม:</strong> ควรเก็บเกี่ยวในตอนเช้าที่อากาศไม่ร้อนจัด เพื่อลดการคายน้ำของผล</li></ul></li><li><strong>เสนอแนวทางการจัดการหลังการเก็บเกี่ยวเพื่อลดความเสียหาย:</strong><ul><li><strong>คัดแยกเบื้องต้น:</strong> คัดแยกผลที่เสียหาย มีตำหนิ หรือเป็นโรคออกทันที เพื่อป้องกันการแพร่กระจายของเชื้อโรค</li><li><strong>การล้างและทำความสะอาด:</strong> ล้างผลส้มโอด้วยน้ำสะอาด อาจผสมคลอรีนความเข้มข้นต่ำ (ประมาณ 50-100 ppm) เพื่อลดปริมาณเชื้อจุลินทรีย์บนผิวผล จากนั้นเช็ดหรือผึ่งลมให้แห้งสนิท</li><li><strong>การเคลือบผิว (Optional):</strong> บางครั้งอาจมีการเคลือบผิวด้วยสารเคลือบธรรมชาติ (เช่น แวกซ์เกรดอาหาร) เพื่อลดการคายน้ำและเพิ่มความเงางาม</li><li><strong>การคัดขนาดและคัดคุณภาพ:</strong> คัดแยกผลตามขนาดและคุณภาพ เพื่อให้ได้มาตรฐานสำหรับการส่งออก</li><li><strong>การบรรจุหีบห่อ:</strong><ul><li><strong>ใช้วัสดุห่อหุ้ม:</strong> ห่อผลส้มโอแต่ละผลด้วยกระดาษ หรือตาข่ายโฟม เพื่อป้องกันการเสียดสีและกระแทก</li><li><strong>ใช้กล่องที่แข็งแรงและมีรูระบายอากาศ:</strong> บรรจุลงในกล่องที่เหมาะสม ไม่หลวมหรือแน่นเกินไป และมีการระบายอากาศที่ดี เพื่อลดการสะสมความร้อนและความชื้น</li></ul></li><li><strong>การลดอุณหภูมิ (Pre-cooling):</strong> ลดอุณหภูมิของผลส้มโอทันทีหลังการเก็บเกี่ยว เพื่อลดอัตราการหายใจและยืดอายุการเก็บรักษา</li><li><strong>การขนส่ง:</strong> ขนส่งโดยใช้ยานพาหนะที่มีระบบควบคุมอุณหภูมิ (ห้องเย็น) และวางกล่องซ้อนกันอย่างระมัดระวัง ไม่สูงเกินไป เพื่อป้องกันการกระแทกและแรงกดทับ</li></ul></li></ol>"
                    }
                ]
            },
            {
                id: 6,
                title: "การตลาดและการแปรรูปผลผลิตกล้วยน้ำว้า",
                description: "เกษตรกรผู้ปลูกกล้วยน้ำว้าจำนวนมาก แต่ประสบปัญหาการระบายผลผลิตไม่ทัน ทำให้กล้วยสุกงอมและเน่าเสียจำนวนมาก เกษตรกรต้องการหาช่องทางในการเพิ่มมูลค่าให้กับผลผลิตกล้วยน้ำว้าเพื่อลดการสูญเสีย",
                solutions: [
                    {
                        type: "ไม่ใช้ Chain of Thought (No CoT)",
                        prompt: "กล้วยน้ำว้าล้นตลาด เน่าเสียเยอะ ทำไงดี?",
                        answer: "<p>ทำกล้วยตาก ทำกล้วยฉาบ</p>"
                    },
                    {
                        type: "Standard CoT",
                        prompt: "เกษตรกรผู้ปลูกกล้วยน้ำว้าจำนวนมาก แต่ประสบปัญหาการระบายผลผลิตไม่ทัน ทำให้กล้วยสุกงอมและเน่าเสียจำนวนมาก เกษตรกรต้องการหาช่องทางในการเพิ่มมูลค่าให้กับผลผลิตกล้วยน้ำว้าเพื่อลดการสูญเสีย\n\n**คิดทีละขั้นตอน:**\n1. ระบุปัญหาหลักที่ทำให้เกิดการสูญเสียผลผลิต\n2. เสนอแนวทางการแปรรูปกล้วยน้ำว้าเพื่อเพิ่มมูลค่า\n3. เสนอแนวทางการตลาดและช่องทางการจำหน่าย",
                        answer: "<h4>คิดทีละขั้นตอน:</h4><ol><li><strong>ระบุปัญหาหลักที่ทำให้เกิดการสูญเสียผลผลิต:</strong><ul><li><strong>การผลิตล้นตลาด:</strong> มีปริมาณกล้วยน้ำว้าออกสู่ตลาดพร้อมกันจำนวนมาก ทำให้ราคาตกต่ำและระบายไม่ทัน</li><li><strong>อายุการเก็บรักษาสั้น:</strong> กล้วยน้ำว้าเป็นผลไม้ที่สุกเร็วและเน่าเสียง่าย ทำให้เกิดการสูญเสียสูงหากไม่สามารถจำหน่ายได้ทันเวลา</li><li><strong>ขาดช่องทางการตลาดที่หลากหลาย:</strong> พึ่งพิงการจำหน่ายในรูปแบบผลสดเพียงอย่างเดียว</li></ul></li><li><strong>เสนอแนวทางการแปรรูปกล้วยน้ำว้าเพื่อเพิ่มมูลค่า:</strong><ul><li><strong>การแปรรูปเบื้องต้น (เพื่อยืดอายุ):</strong><ul><li><strong>กล้วยตาก:</strong> เป็นผลิตภัณฑ์แปรรูปที่ได้รับความนิยมสูง ทำได้ง่าย ยืดอายุได้นาน และมีตลาดรองรับดี</li><li><strong>กล้วยอบแห้ง:</strong> คล้ายกล้วยตาก แต่ใช้กระบวนการอบ ทำให้ได้ผลิตภัณฑ์ที่มีคุณภาพและสุขลักษณะดีขึ้น</li><li><strong>กล้วยกวน:</strong> ผลิตภัณฑ์ที่มีรสชาติเฉพาะตัว เก็บได้นาน</li><li><strong>กล้วยฉาบ/กล้วยทอด:</strong> ผลิตภัณฑ์ของว่างที่ได้รับความนิยม สามารถสร้างรายได้ได้ดี</li></ul></li><li><strong>การแปรรูปขั้นสูง/นวัตกรรม:</strong><ul><li><strong>แป้งกล้วย:</strong> สามารถนำไปใช้เป็นส่วนผสมในการทำขนมปัง, ขนมหวาน, หรืออาหารอื่นๆ</li><li><strong>กล้วยผง/เครื่องดื่มจากกล้วย:</strong> สำหรับผลิตภัณฑ์เพื่อสุขภาพหรืออาหารเสริม</li><li><strong>ไอศกรีมกล้วย/สมูทตี้กล้วย:</strong> สำหรับตลาดของว่างและเครื่องดื่ม</li><li><strong>น้ำส้มสายชูกล้วย:</strong> การนำกล้วยที่สุกงอมมาหมักเป็นน้ำส้มสายชู</li></ul></li></ul></li><li><strong>เสนอแนวทางการตลาดและช่องทางการจำหน่าย:</strong><ul><li><strong>ตลาดท้องถิ่น:</strong><ul><li>จำหน่ายที่ตลาดสด, ตลาดนัด, หรือริมถนน</li><li>จำหน่ายให้กับร้านค้าของชำในท้องถิ่น</li></ul></li><li><strong>ตลาดออนไลน์:</strong><ul><li>สร้างเพจ/ร้านค้าออนไลน์บน Facebook, Instagram, LINE OA เพื่อโปรโมทและจำหน่ายผลิตภัณฑ์</li><li>เข้าร่วมแพลตฟอร์มอีคอมเมิร์ซ เช่น Shopee, Lazada</li></ul></li><li><strong>ตลาดเฉพาะกลุ่ม:</strong><ul><li>จำหน่ายให้กับร้านกาแฟ, ร้านเบเกอรี่ (สำหรับแป้งกล้วย หรือกล้วยสด)</li><li>ส่งให้กับโรงเรียน หรือโรงพยาบาล (สำหรับผลิตภัณฑ์เพื่อสุขภาพ)</li></ul></li><li><strong>สร้างแบรนด์และบรรจุภัณฑ์:</strong><ul><li>ออกแบบบรรจุภัณฑ์ที่น่าสนใจ สะอาด และให้ข้อมูลผลิตภัณฑ์ที่ชัดเจน</li><li>สร้างเรื่องราวของผลิตภัณฑ์ (Storytelling) เพื่อเพิ่มมูลค่า</li></ul></li><li><strong>การเข้าร่วมงานแสดงสินค้า:</strong> เข้าร่วมงาน OTOP หรืองานแสดงสินค้าเกษตร เพื่อขยายช่องทางการตลาดและสร้างเครือข่าย</li><li><strong>การสร้างเครือข่าย:</strong> ร่วมมือกับเกษตรกรรายอื่น หรือกลุ่มวิสาหกิจชุมชน เพื่อเพิ่มอำนาจในการต่อรองและขยายกำลังการผลิต</li></ul></li></ol>"
                    }
                ]
            }
        ];

        const problemButtonsContainer = document.getElementById('problem-buttons-container');
        const problemDetailsSection = document.getElementById('problem-details-section');
        const selectedProblemTitleElem = document.getElementById('selected-problem-title');
        const selectedProblemDescriptionElem = document.getElementById('selected-problem-description');
        const cotTabsContainer = document.getElementById('cot-tabs-container');
        const cotPromptTextElem = document.getElementById('cot-prompt-text');
        const cotAnswerTextElem = document.getElementById('cot-answer-text');
        const cotExamplesChartCtx = document.getElementById('cotExamplesChart').getContext('2d');
        
        let activeProblemId = null;
        let activeSolutionType = null;
        let myChart = null;

        function displayProblemButtons() {
            agriculturalProblemsData.forEach(problem => {
                const button = document.createElement('button');
                button.className = 'problem-button text-lg font-medium py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75';
                button.textContent = problem.title;
                button.onclick = () => selectProblem(problem.id);
                problemButtonsContainer.appendChild(button);
            });
        }

        function selectProblem(problemId) {
            activeProblemId = problemId;
            const problem = agriculturalProblemsData.find(p => p.id === problemId);
            if (!problem) return;

            // Highlight active problem button
            Array.from(problemButtonsContainer.children).forEach(btn => {
                if (btn.textContent === problem.title) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            selectedProblemTitleElem.textContent = problem.title;
            selectedProblemDescriptionElem.textContent = problem.description;
            
            displayCoTTabs(problem.solutions);
            // Select the first CoT type by default
            if (problem.solutions.length > 0) {
                selectCoTSolution(problem.solutions[0].type);
            }

            problemDetailsSection.classList.remove('hidden');
            // Scroll to the details section
            problemDetailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function displayCoTTabs(solutions) {
            cotTabsContainer.innerHTML = ''; // Clear existing tabs
            solutions.forEach(solution => {
                const tabButton = document.createElement('button');
                tabButton.className = 'tab-button';
                tabButton.textContent = solution.type;
                tabButton.onclick = () => selectCoTSolution(solution.type);
                cotTabsContainer.appendChild(tabButton);
            });
        }

        function selectCoTSolution(solutionType) {
            activeSolutionType = solutionType;
            const problem = agriculturalProblemsData.find(p => p.id === activeProblemId);
            if (!problem) return;

            const solution = problem.solutions.find(s => s.type === solutionType);
            if (!solution) return;

            cotPromptTextElem.textContent = solution.prompt;
            cotAnswerTextElem.innerHTML = solution.answer; // Use innerHTML for HTML content in answers

            // Highlight active tab
            Array.from(cotTabsContainer.children).forEach(tab => {
                if (tab.textContent === solutionType) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        }

        function renderChart() {
            const labels = agriculturalProblemsData.map(p => p.title);
            const data = agriculturalProblemsData.map(p => p.solutions.length);

            if (myChart) {
                myChart.destroy();
            }

            myChart = new Chart(cotExamplesChartCtx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'จำนวนตัวอย่าง CoT',
                        data: data,
                        backgroundColor: 'rgba(22, 163, 74, 0.6)', // bg-green-600 with opacity
                        borderColor: 'rgba(21, 128, 61, 1)', // bg-green-700
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1, // Ensure y-axis shows whole numbers
                                color: '#44403c' // text-stone-700
                            },
                            grid: {
                                color: '#e7e5e4' // border-stone-200
                            }
                        },
                        x: {
                             ticks: {
                                color: '#44403c', // text-stone-700
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    // Simple heuristic for wrapping long labels if needed
                                    if (label.length > 20) { 
                                        return label.substring(0, 18) + '...';
                                    }
                                    return label;
                                }
                            },
                            grid: {
                                display: false // Hide x-axis grid lines for cleaner look
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // Hide legend as it's self-explanatory
                        },
                        tooltip: {
                            backgroundColor: '#292524', // bg-stone-800
                            titleColor: '#fafaf9', // text-stone-50
                            bodyColor: '#fafaf9', // text-stone-50
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize the application
        displayProblemButtons();
        renderChart();

    </script>
</body>
</html>
